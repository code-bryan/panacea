<%= render "ui/header" %>

<% content_for :classname, "overflow-hidden" %>
<%
  filters = [
    "All",
    "Recently Seen",
    "Debtors"
  ]

  activeFilter = "All"
%>

<main class="flex flex-1 justify-center py-8 px-4 sm:px-6 lg:px-8 overflow-hidden">
  <div class="w-full max-w-4xl flex flex-col gap-8 ">
    <h1 class="text-3xl font-bold leading-tight tracking-tight text-gray-900">Patients</h1>
    
    <input 
      type="text"
      placeholder="Search patients by name or phone number"
      class="outline-none border border-zinc-300 bg-zinc-50 rounded-md px-4 py-2.5 text-sm placeholder:text-zinc-400 w-full"
    >

    <div class="flex gap-2">
      <% filters.each do |filter| %>
        <% active = filter == activeFilter  %>
        <button 
          class="<%= active ? 
            "rounded-md bg-blue-100 px-4 py-2 text-sm font-semibold text-blue-500" : 
            "rounded-md bg-transparent px-4 py-2 text-sm font-medium text-gray-500 hover:bg-gray-100 cursor-pointer"
          %>"
        >
          <%= filter %>
        </button>
      <% end %>
    </div>

    <div class="flex flex-col overflow-auto max-h-[calc(100vh/1.55)] border-t border-t-zinc-200">

      <% @patients.each do |patient| %>
        <div class="flex items-center justify-between border-b py-4 border-b-zinc-200 cursor-pointer">
          <div class="flex gap-5">
            <p class="bg-blue-100 text-blue-500 flex justify-center items-center font-medium rounded-full size-10">
              <%= get_initials(patient.full_name) %>
            </p>

            <div>
              <p class="font-medium text-gray-900"><%= capitalize_name(patient.full_name) %></p>
              <p class="text-sm text-gray-500"><%= format_phone(patient[:phone]) %></p>
            </div>
          </div>

          <p class="text-sm text-gray-500">Last Visit: <%= format_date(patient[:updated_at]) %></p>
        </div >
      <% end %>

      
    </div>
  </div>
</main>